<html>

<head>
    <title>Altamotriz</title>
    <link rel="shortcut icon" type="image/x-icon" href="./img/car-service.ico" />
    <link rel="stylesheet" href="./css/mi_hoja_de_estilos.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style type="text/css">
        .ul-menu {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: black;
        }

        .li-menu {
            float: left;
        }

        .li-menu a {
            display: block;
            color: white;
            text-align: center;
            font-family: "Roboto", sans-serif;
            font-size: 1.1rem;
            padding: 16px;
            padding-right: 76px;
            padding-left: 75px;
            text-decoration: none;
        }

        li a:hover {
            background-color: #87807F;
        }

        .li_menu {
            margin-bottom: 10px;
        }

        table,
        th,
        td {
            text-align: left;
            border-collapse: collapse;
        }

        .fila {
            padding-bottom: 10px;
        }

        .info_box {
            border: solid;
            border-width: 2px;
            border-color: #222;
            background-color: #E7E9EB;
            width: 100%;
            height: 150px;
        }

        .mt-10 {
            margin-top: 10px;
            ;
        }

        #Bueno {
            accent-color: green;
        }

        #Medio {
            accent-color: yellow;
        }

        #Malo {
            accent-color: red;
        }

        #NA {
            accent-color: blue;
        }

        input {
            float: right;
        }

        th {
            text-align: right;
            color: #fff;
            background: black;
        }

        tfoot {
            text-align: center;
            color: #fff;
            background: black;
        }

        textarea {
            resize: none;
        }

        body {
            background-color: #DBEBF9;
            font-family: "Roboto", sans-serif;
        }

        .backgroundopacity {
            opacity: 0.5;

        }

    </style>
</head>


<body>
    <div style="background-color:#6283C1 ; display: block; height: 22px;
            min-width: 950px; ">
        <li style="color: #6283C1;">barra de color</li>
    </div>
    <header style="background-color: #CCE3F6;">
        <img src="./img/logo.png" alt="logo_Altamotriz" class="centrar" ;>
    </header>
    <nav>
        <!--------------------------------- Menu ------------------------------------->
        <div class="li_menu">
            <ul style="border-radius: 8px;">
                <li> <div class="dropdown">
                    <button class="dropbtn" onclick="dropdownclickadmin()">Administrador
                    <i class="fa fa-caret-down"></i>
                    </button>
                    <div class="dropdown-content" id="menuadministrador">
                        <a href="./admin_usuarios.html">Aministrar Usuarios</a>
                        <a href="./admin_vehiculos.html">Aministrar Vehiculos</a>
                        <a href="./admin_clientes.html">Aministrar Clientes</a>
                    </div>
                    </div> 
                </li>
                <li><a href="./gerente.html">Gerente</a></li>
                <li> <div class="dropdown">
                  <button class="dropbtn" onclick="dropdownclickasesor()">Asesor
                  <i class="fa fa-caret-down"></i>
                  </button>
                  <div class="dropdown-content" id="menuasesor">
                    <a href="./asesor.html">Ver ordenes activas</a>
                      <a href="./asesor_nueva_orden_servicio.html">Nueva orden de servicio</a> 
                  </div>
                  </div> 
              </li>
                <li><a href="./tecnico.html">Tecnico</a></li>
                <li><a href="./lavado.html">Lavador</a></li>
                <li><a href="./calidad.html">Calidad</a></li>
                <li><a href="./logout.php"><img src="./img/cerrar_sesion.ico" alt="Salir" style="width: 25px;height:22px;"></a>
                </li>
            </ul>
        </div>
    </nav>
    <div style="background-color:#6283C1 ; display: block; height: 22px;
            min-width: 950px; color: white; margin-bottom:5px; padding-top:
            5px;">
        Tabla de Ordenes de Servicio activas
    </div>
    <div class="contenido" >
        <div class="fila">
            <div id="tabla_asesor" ></div>
        </div>
        <!-------------------------------------------- Informacion de Orden Seleccionada ------------------------------------------------->
        <div style="background-color:#6283C1 ; display: block; height: 22px;
                min-width: 950px; color: white; margin-bottom:5px; padding-top:
                5px;">
            Informacion de Orden Seleccionada
        </div>
        <div class="fila">
            <table  cellpadding="0" cellspacing="0" width="100%">
                <tr class="info_box">
                    <td style="text-align: left; width: 21%;">
                        <legend>Orden:</legend>
                        <ul>
                            <li>Folio: <strong><span id="order_info_folio"></span></strong></li>
                            <li>Vehiculo: <strong><span id="order_info_vehiculo"></span></strong></li>
                            <li>Placas: <strong><span id="order_info_placas"></span></strong></li>
                            <li>Vin: <strong><span id="order_info_vin"></span></strong></li>
                        </ul>
                    </td>
                    <td style="text-align: left; width: 21%;">

                        <legend>Cliente:</legend>
                        <ul>
                            <li>Nombre: <strong><span id="cliente_nombre"></span></strong></li>
                            <li>Telefono: <strong><span id="cliente_telefono"></span></strong></li>
                            <li>RFC: <strong><span id="cliente_rfc"></span></strong></li>
                        </ul>

                    </td>
                    <td style="text-align: center; width: 29%;">

                        <legend style="text-align: left; ">Notas:</legend>
                        <textarea id="notas_asesor" rows="6" cols="55" style="border-radius: 5px;" readonly>

                            </textarea>

                    </td>
                    <td style="text-align: center; width: 29%;">

                        <legend style="text-align: left;">Operaciones:</legend>
                        <textarea id="operaciones" rows="8" cols="55" style="border-radius: 5px; margin-bottom: 5px;" readonly>
                            </textarea>

                    </td>


                    </td>
                </tr>

            </table>
        </div>
    </div>
    <table>
        <div id="table-titles">
        </div>
        <div id="table-body">
        </div>
    </table>
    <div style="background-color:#6283C1 ; display: block; height: 22px;
        min-width: 950px; color: white; margin-bottom:5px; padding-top: 5px;">
        Resumen
    </div>
    <!-------------------------------------------- Resumen ------------------------------------------------->
    <!-------------------------------------------- Checklist Tecnico ------------------------------------------------->
    <table border="1" cellpadding="0" cellspacing="0" width="49%" align="left" style="border: 3px solid black;">
        <caption><strong>CheckList Tecnico</strong></caption>

        <tbody>
            <tr>
                <td valign="Top" width="50%">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                        <tbody>
                            <!---------------------- Parte trasera ---------------------->
                            <th><strong>Parte trasera&nbsp &nbsp &nbsp N
                                    &nbsp X &nbsp &nbsp/ &nbsp &nbspB</strong></th>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Pastillas
                                        de freno traseras der.: <input type="radio" id="Bueno" name="balTrasDer"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="balTrasDer" value="Medio">
                                        <input type="radio" id="Malo" name="balTrasDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Pastillas
                                        de freno traseras izq.: <input type="radio" id="Bueno" name="balTrasIzq"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="balTrasIzq" value="Medio">
                                        <input type="radio" id="Malo" name="balTrasIzq" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Limpiador
                                        de medallon trasero: <input type="radio" id="Bueno" name="limptras"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="limptras" value="Medio">
                                        <input type="radio" id="Malo" name="limptras" value="Malo"><input type="radio"
                                            id="NA" name="limptras" value="NA">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Luces
                                        traseras: <input type="radio" id="Bueno" name="luztras" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="luztras" value="Medio">
                                        <input type="radio" id="Malo" name="luztras" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <!---------------------- Direccion suspension ---------------------->
                            <tr>
                                <td bgcolor="black" style="color:#fff" align="center"><Strong>Direccion
                                        Suspension</Strong></td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Amortiguador
                                        delantero der.: <input type="radio" id="Bueno" name="amorDelDer" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="amorDelDer" value="Medio">
                                        <input type="radio" id="Malo" name="amorDelDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Amortiguador
                                        delantero izq.: <input type="radio" id="Bueno" name="amorDelIzq" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="amorDelIzq" value="Medio">
                                        <input type="radio" id="Malo" name="amorDelIzq" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Amortiguador
                                        trasero der.: <input type="radio" id="Bueno" name="amortrasDer" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="amortrasDer" value="Medio">
                                        <input type="radio" id="Malo" name="amortrasDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Amortiguador
                                        trasero izq.: <input type="radio" id="Bueno" name="amortrasIzq" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="amortrasIzq" value="Medio">
                                        <input type="radio" id="Malo" name="amortrasIzq" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Direccion:
                                        <input type="radio" id="Bueno" name="direccion" value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="direccion" value="Medio">
                                        <input type="radio" id="Malo" name="direccion" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <!---------------------- General ---------------------->
                            <tr>
                                <td bgcolor="black" style="color:#fff" align="center"><Strong>General</Strong></td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Reset
                                        indicador cambio aceite: <input type="radio" id="Bueno" name="camAceite"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="camAceite" value="Medio">
                                        <input type="radio" id="Malo" name="camAceite" value="Malo"><input type="radio"
                                            id="NA" name="camAceite" value="NA">
                                    </legend>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td valign="Top" width="50%">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                        <tbody>
                            <!---------------------- Parte delantera ---------------------->
                            <th><strong>Parte delantera&nbsp &nbsp &nbsp N
                                    &nbsp X &nbsp &nbsp/&nbsp &nbsp B </strong></th>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Filtro
                                        de aire de motor: <input type="radio" id="Bueno" name="fAire" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="fAire" value="Medio">
                                        <input type="radio" id="Malo" name="fAire" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <legend style="border-style: 0px;">Filtro
                                        de Cabina: <input type="radio" id="Bueno" name="fCabina" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="fCabina" value="Medio">
                                        <input type="radio" id="Malo" name="fCabina" value="Malo"><input type="radio"
                                            id="NA" name="fCabina" value="NA">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Pastillas
                                        de freno delanteras der.: <input type="radio" id="Bueno" name="balDelDer"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="balDelDer" value="Medio">
                                        <input type="radio" id="Malo" name="balDelDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Pastillas
                                        de freno delanteras izq.: <input type="radio" id="Bueno" name="balDelIzq"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="balDelIzq" value="Medio">
                                        <input type="radio" id="Malo" name="balDelIzq" value="Malo">
                                    </legend>
                                </td>
                            </tr>

                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Limpiaparabrisas
                                        derecho: <input type="radio" id="Bueno" name="limpDelDer" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="limpDelDer" value="Medio">
                                        <input type="radio" id="Malo" name="limpDelDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Limpiaparabrisas
                                        izquierdo: <input type="radio" id="Bueno" name="limpDelIzq" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="limpDelIzq" value="Medio">
                                        <input type="radio" id="Malo" name="limpDelIzq" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Faro
                                        derecho y luces: <input type="radio" id="Bueno" name="faroDer" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="faroDer" value="Medio">
                                        <input type="radio" id="Malo" name="faroDer" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Faro
                                        izquiero y luces: <input type="radio" id="Bueno" name="faroizq" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="faroizq" value="Medio">
                                        <input type="radio" id="Malo" name="faroizq" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Anticongelante:
                                        <input type="radio" id="Bueno" name="anticongelante" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="anticongelante" value="Medio">
                                        <input type="radio" id="Malo" name="anticongelante" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Liquido
                                        direccion hidraulica: <input type="radio" id="Bueno" name="liqDireccion"
                                            value="Bueno" checked="checked">
                                        <input type="radio" id="Medio" name="liqDireccion" value="Medio">
                                        <input type="radio" id="Malo" name="liqDireccion" value="Malo"><input
                                            type="radio" id="NA" name="anticongelante" value="NA">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Banda
                                        de accesorios: <input type="radio" id="Bueno" name="banda" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="banda" value="Medio">
                                        <input type="radio" id="Malo" name="banda" value="Malo">
                                    </legend>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" colspan="3">
                                    <legend style="border-style: 0px;">Revision
                                        de bateria: <input type="radio" id="Bueno" name="bateria" value="Bueno"
                                            checked="checked">
                                        <input type="radio" id="Medio" name="bateria" value="Medio">
                                        <input type="radio" id="Malo" name="bateria" value="Malo">
                                    </legend>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th colspan="2">N:No aplica &nbsp &nbsp X:Reemplazo &nbsp
                    &nbsp /:Usado pero no necesita reemplazo &nbsp &nbsp
                    B:Bueno &nbsp &nbsp</th>

            </tr>
        </tfoot>
    </table>
   
    <!---------------------- Comentarios  ---------------------->

    <table cellpadding="0" cellspacing="0" width="49%" align="left" style="margin-top: 10px; border-color: #CCE3F6;">
        <tbody>
            <tr>
                <td>
                    <legend>Comentarios del Tecnico</legend>
                    <textarea id="NotasTecnicos" rows="8" cols="95" style="border-radius: 5px; margin: 5px;">
                    </textarea>
                    <button type="submit" class="mt-10" id="btn_guardar_notas" style="float: right;">
                        Guardar
                    </button>
                </td>
 
        </tbody>
    </table>
    <table style="width: 100%;">
        <tr>
            <td>
                <div style="background-color:#6283C1 ; display: block; height: 22px;
    min-width: 950px; color: white; margin-bottom:5px; padding-top: 5px;">
                    Fotos
                </div>
            </td>
        </tr>
        <tr>
            <td style="margin-top: 10px;">
                    <div>

                    </div>
            </td>
        </tr>

    </table>


    <!---------------------- Script para la lectura de los datos de la base de datos ---------------------->
    <script>

        window.addEventListener("load", function (e) { // cuando carga la pagina
            fetch('./backend/getOrders.php', {
                method: 'POST',
                body: {
                    info: 'hola mundo'
                }
            })
                .then(function (response) {
                    return response.text();
                })
                .then(function (return_data) {
                    console.log(return_data);
                    if (return_data == "no hay ordenes de servicio") {
                        console.log("TODO: implementa algo");
                        return;
                    }

                    var data = JSON.parse(return_data);

                    var columnNames = ["idordenDeServicio",
                        "vin",
                        "modelo",
                        "placas",
                        "fechaEntrada",
                        "fechaSalida",
                        "estatus",
                        "alertas",
                        "opciones"];

                    var table = document.createElement('table');

                    var tr = document.createElement('tr');
                    var td = document.createElement('td');
                    var text = document.createTextNode('Orden De Servicio');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Vin');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Tipo de vehiculo');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Placas');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Fecha entrada');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Fecha salida');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Estatus');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Atencion');
                    td.appendChild(text);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    text = document.createTextNode('Opciones');
                    td.appendChild(text);
                    tr.appendChild(td);

                    table.appendChild(tr);


                    for (var i = 0; i < data.length; i++) {
                        var tr = document.createElement('tr');
                        for (var j = 0; j < columnNames.length; j++) {
                            var td = document.createElement('td');
                            if (columnNames[j] === 'opciones') {
                                var btn = document.createElement('input');
                                btn.type = "button";
                                btn.className = "";
                                btn.value = data[i]['idordenDeServicio'];
                                var text = btn; // text va a tener adentro un boton
                            } else {
                                var text = document.createTextNode(data[i][columnNames[j]]);
                            }
                            td.appendChild(text);
                            tr.appendChild(td);
                        }
                        table.appendChild(tr);
                    }
                    document.getElementById("tabla_asesor").appendChild(table);

                })
                .catch(function (err) {
                    console.log(err);
                });
        });
        function dropdownclickadmin() {
          document.getElementById("menuadministrador").classList.toggle("show");
        }
        
        window.onclick = function(e) {
          if (!e.target.matches('.dropbtn')) {
          var menuadministrador = document.getElementById("menuadministrador");
            if (menuadministrador.classList.contains('show')) {
              menuadministrador.classList.remove('show');
            }
          }
        }
        function dropdownclickasesor() {
          document.getElementById("menuasesor").classList.toggle("show");
        }
        
        window.onclick = function(e) {
          if (!e.target.matches('.dropbtn')) {
          var menuasesor = document.getElementById("menuasesor");
            if (menuasesor.classList.contains('show')) {
              menuasesor.classList.remove('show');
            }
          }
        }
    </script>
</body>

</html>